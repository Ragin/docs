import React from 'react';
import Paper from '@mui/material/Paper';
import Table from '@mui/material/Table';
import TableBody from '@mui/material/TableBody';
import TableCell from '@mui/material/TableCell';
import TableContainer from '@mui/material/TableContainer';
import TableHead from '@mui/material/TableHead';
import TableRow from '@mui/material/TableRow';
import Typography from '@mui/material/Typography';

import {useMedicationsTable} from '../useMedicationsTable/use-medications-table';
import {ClaimsRecord} from '../useMedicationsTable/use-medications-table.types';

import {MedicationsTableProps} from './medications-table.types';

export function MedicationsTable(props: MedicationsTableProps) {
  const {title} = props;
  const {headers, rows} = useMedicationsTable();

  const headersMap = (header: string) => (
    <TableCell key={header} align="left">
      {header}
    </TableCell>
  );

  const rowsMap = (row: ClaimsRecord) => (
    <TableRow key={row.rxSeq} sx={{'&:last-child td, &:last-child th': {border: 0}}}>
      <TableCell>{row.sbmDt}</TableCell>
      <TableCell>{row.lastName}</TableCell>
      <TableCell>{row.firstName}</TableCell>
      <TableCell>{row.rxNumber}</TableCell>
      <TableCell>{row.refillNumber}</TableCell>
      <TableCell>{row.claimStatus}</TableCell>
      <TableCell>{row.rxClaimNbr}</TableCell>
    </TableRow>
  );

  return (
    <>
      <Typography variant="h2">{title}</Typography>
      <TableContainer component={Paper}>
        <Table sx={{minWidth: 650}} aria-label="simple table">
          <TableHead>
            <TableRow>{headers.map(headersMap)}</TableRow>
          </TableHead>
          <TableBody>{rows.map(rowsMap)}</TableBody>
        </Table>
      </TableContainer>
    </>
  );
}

export default MedicationsTable;


======





import React from 'react';

import {ClaimsRecord, UseMedicationsTableReturn} from './use-medications-table.types';
import {getData} from "../../model/service/testService";

export function useMedicationsTable(): UseMedicationsTableReturn {
  const headers = ['Seq', 'Submitted Date', 'First Name', 'RxNumber', 'Refill Number', 'Claim Status', 'RX Claim Nbr'];
  const [rows, setRows] = React.useState<Array<ClaimsRecord>>([]);
  const [loading, setLoading] = React.useState<boolean>(true);
  let data: (ClaimsRecord)[] = [];
  getData('/sdd', '/dss', null).then(response => {

    data = response.data.memberSrchInfoResp;
    console.log(data);
    setRows(data);
  });
  React.useEffect(() => {
    setRows(data);
    setLoading(false);
  }, []);

  return {
    headers,
    loading,
    rows
  };
}

export default useMedicationsTable;

==
import axios from 'axios';
import {ClaimsRecord} from "../../medications-table/useMedicationsTable/use-medications-table.types";

interface ConfigServiceResponse {
  data: {
    config: any;
  };
}


export function getData(basePath: string, feature: string, headers: any): Promise<any> {
  const url = `${basePath}${feature}`;
  console.log('in getData');
  const config = {
    headers
  };

   // axios.post<ConfigServiceResponse>('https://rxclaim-lite-api-dev-ctc.optum.com/rxclaim-lite/search', config).then(response => {
   //   console.log(response);
   // });
 return  axios.post<{data: any}>(
    'https://tst.com',
    {
      memberId: 'SADKCAGE',
      fillDtFrom: 20221217,
      fillDtThru: 20221217,
      tenantId: 'RXDV1_DEV'
    },
    config
  );

    /*return [
    {
      id: '1',
      code: '1111',
      name: 'Bandaids',
      status: 'Active'
    },
    {
      id: '2',
      code: '1122',
      name: 'Arthritis Gloves',
      status: 'Active'
    },
    {
      id: '3',
      code: '1133',
      name: 'Tylenol',
      status: 'Active'
    },
    {
      id: '4',
      code: '1144',
      name: 'Medicine 3',
      status: 'Active'
    }
  ];*/
}

